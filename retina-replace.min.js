(function(a){var d=function(c,e){this.options=e;var b=a(c),d=b.is("img"),f=d?b.attr("src"):b.backgroundImageUrl(),g=f.lastIndexOf("."),i=f.substr(g+1),f=f.substr(0,g)+this.options.suffix+"."+i;a("<img/>").attr("src",f).load(function(){d?b.attr("src",a(this).attr("src")):b.backgroundImageUrl(a(this).attr("src"));b.attr("data-retina","complete")})};d.prototype={constructor:d};a.fn.retinaReplace=function(c){return this.each(function(){var e=a(this),b=e.data("retinaReplace"),h=a.extend({},a.fn.retinaReplace.defaults,
e.data(),"object"==typeof c&&c);b||e.data("retinaReplace",b=new d(this,h));if("string"==typeof c)b[c]()})};a.fn.backgroundImageUrl=function(c){return c?this.each(function(){a(this).css("background-image",'url("'+c+'")')}):a(this).css("background-image").replace(/url\(|\)|"|'/g,"")};a.fn.retinaReplace.defaults={suffix:"_2x"};a.fn.retinaReplace.Constructor=d;a(function(){a("[data-retina='true']").retinaReplace()})})(window.jQuery);